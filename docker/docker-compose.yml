version: "3.8"
# Configuración de Despliegue (App Runner)
# Este contenedor se ejecuta, compila el código, actualiza el WAR y se apaga.

services:
  builder:
    build:
      context: ..
      dockerfile: docker/Dockerfile-builder
    volumes:
      - ..:/app # Monta el código fuente
      - ./deploy:/deploy # Monta la carpeta compartida donde Tomcat busca el WAR
    # Opcional: Caché de Gradle para acelerar builds subsiguientes
    # - gradle-cache:/root/.gradle 
