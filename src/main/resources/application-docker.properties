# Docker Profile - Para ejecutar la aplicaci√≥n dentro del contenedor de Tomcat
# Este perfil usa nombres de contenedores Docker en lugar de localhost

# Authentik Configuration (usando nombres de contenedores)
spring.security.oauth2.client.provider.authentik.issuer-uri=${AUTHENTIK_BACKEND_HOST}/application/o/inv/
spring.security.oauth2.client.provider.authentik.authorization-uri=${AUTHENTIK_FRONTEND_HOST}/application/o/authorize/
spring.security.oauth2.client.provider.authentik.token-uri=${AUTHENTIK_BACKEND_HOST}/application/o/token/
spring.security.oauth2.client.provider.authentik.user-info-uri=${AUTHENTIK_BACKEND_HOST}/application/o/userinfo/
spring.security.oauth2.client.provider.authentik.jwk-set-uri=${AUTHENTIK_BACKEND_HOST}/application/o/inv/jwks/

# Authentik API Configuration (usando nombre del contenedor)
authentik.api.url=${AUTHENTIK_BACKEND_HOST}
authentik.api.token=inv_tk
authentik.app.slug=inv

# Database Configuration (usando nombre del contenedor de PostgreSQL)
spring.datasource.url=jdbc:postgresql://db:5432/dev_app_db
spring.datasource.username=dev_app_user
spring.datasource.password=F4cxO1xdCdKRx2VuHCh2gQ

# Proxy Configuration (Fix HTTP vs HTTPS redirects)
server.forward-headers-strategy=native
server.tomcat.remoteip.remote-ip-header=x-forwarded-for
server.tomcat.remoteip.protocol-header=x-forwarded-proto
